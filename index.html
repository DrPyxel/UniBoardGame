<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/DrPyxel/UniBoardGame/master/sprites/Beesley.png">
    <title>
        Uni: Graduate
    </title>>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.0.0/dist/phaser.min.js"></script>
    <style>
        body {
	        cursor: url('sprites/SC2-cursor-protoss.cur'), default;
            background:linear-gradient(to right, #fff,#ddd);
        }
        script {
            
        }
        
    </style>
</head>
<body>
        <script>
        var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 800,
        pixelArt: true,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 0 },
                debug: false
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
        };

        var game = new Phaser.Game(config);
        var player;
        var student;
        var cursors;
        var beesles;
        var center;
        var dieOne;
        var dieTwo;
        var dieThree;
        var dieFour;
        var dieFive;
        var dieSix;
        var square1;
        var square2;
        var square3;
        var square4;
        var square5;
        var square6;
        var square7;
        var square8;
        var square9;
        var square10;
        var square11;
        var square12;
        var square13;
        var square14;
        var square15;
        var square16;
        var square17;
        var square18;
        var square19;
        var square20;
        var square21;
        var square22;
        var square23;
        var square24;
        var square25;
        var square26;
        var square27;
        var square28;
        var square29;
        var square30;
        var square31;
        var square32;


        function preload ()
        {
            this.load.image('board', 'sprites/board.png');
            this.load.spritesheet('student', 'sprites/student.png', {frameWidth: 136 / 4, frameHeight: 160 / 4});
            this.load.image('beesley', 'sprites/Beesley.png');
            this.load.image('player', 'sprites/player.png');
            this.load.image('center', 'sprites/boardCenter.png');
            this.load.image('DieOne', 'sprites/DieOne.png');
            this.load.image('DieTwo', 'sprites/DieTwo.png');
            this.load.image('DieThree', 'sprites/DieThree.png');
            this.load.image('DieFour', 'sprites/DieFour.png');
            this.load.image('DieFive', 'sprites/DieFive.png');
            this.load.image('DieSix', 'sprites/DieSix.png');
            this.load.image('square-1', 'sprites/square-1.png');
            this.load.image('square-2', 'sprites/square-2.png');
            this.load.image('square-3', 'sprites/square-3.png');
            this.load.image('square-4', 'sprites/square-4.png');
            this.load.image('square-5', 'sprites/square-5.png');
            this.load.image('square-6', 'sprites/square-6.png');
            this.load.image('square-7', 'sprites/square-7.png');
            this.load.image('square-8', 'sprites/square-8.png');
            this.load.image('square-9', 'sprites/square-9.png');
            this.load.image('square-10', 'sprites/square-10.png');
            this.load.image('square-11', 'sprites/square-11.png');
            this.load.image('square-12', 'sprites/square-12.png');
            this.load.image('square-13', 'sprites/square-13.png');
            this.load.image('square-14', 'sprites/square-14.png');
            this.load.image('square-15', 'sprites/square-15.png');
            this.load.image('square-16', 'sprites/square-16.png');
            this.load.image('square-17', 'sprites/square-17.png');
            this.load.image('square-18', 'sprites/square-18.png');
            this.load.image('square-19', 'sprites/square-19.png');
            this.load.image('square-20', 'sprites/square-20.png');
            this.load.image('square-21', 'sprites/square-21.png');
            this.load.image('square-22', 'sprites/square-22.png');
            this.load.image('square-23', 'sprites/square-23.png');
            this.load.image('square-24', 'sprites/square-24.png');
            this.load.image('square-25', 'sprites/square-25.png');
            this.load.image('square-26', 'sprites/square-26.png');
            this.load.image('square-27', 'sprites/square-27.png');
            this.load.image('square-28', 'sprites/square-28.png');
            this.load.image('square-29', 'sprites/square-29.png');
            this.load.image('square-30', 'sprites/square-30.png');
            this.load.image('square-31', 'sprites/square-31.png');
            this.load.image('square-32', 'sprites/square-32.png');
            
            
        }

        function create ()
        {
            this.add.image(400, 400, 'board');
            beesles = this.physics.add.staticGroup();
            center = this.physics.add.staticGroup();
            
            center.create(400, 400, 'center');
            //beesles.create(400, 400, 'beesley');
            square1 = this.physics.add.group();
            
            
            student = this.physics.add.sprite(750, 50, 'student');
            student.setBounce(0.1);
            student.setCollideWorldBounds(true);

            this.input.mouse.disableContextMenu();

            this.input.on('pointerup', function (pointer) {

                console.log(pointer.upTime - pointer.downTime + 'ms');

                if (pointer.rightButtonDown())
                {
                    console.log(pointer.x + ', ' + pointer.y);
                    if (pointer.x > 100 && pointer.y > 100)
                    {
                        if(pointer.x < 700 && pointer.y < 700)
                        {
                            var dienumber = Math.floor(Math.random() * (6 - 1 + 1)) + 1;
                            //this.add.image(400, 400, 'beesley');
                            center.create(400, 400, 'center');
                            if (dienumber === 1)
                            {
                                this.add.image(400, 300, 'DieOne');
                            }
                            else if (dienumber === 2)
                            {
                                this.add.image(400, 300, 'DieTwo');
                            }
                            else if (dienumber === 3)
                            {
                                this.add.image(400, 300, 'DieThree');
                            }
                            else if (dienumber === 4)
                            {
                                this.add.image(400, 300, 'DieFour');
                            }
                            else if (dienumber === 5)
                            {
                                this.add.image(400, 300, 'DieFive');
                            }
                            else if (dienumber === 6)
                            {
                                this.add.image(400, 300, 'DieSix');
                            }
                            this.add.text(400, 200, dienumber).setFontFamily('Trebuchet MS').setFontSize(25).setColor('#008080');
                            console.log(dienumber);
                            
                        }
                    }
                    
                }

            }, this);


            this.add.text(150, 400, 'Right Click here to roll the dice!').setFontFamily('Trebuchet MS').setFontSize(35).setColor('#008080');
            cursors = this.input.keyboard.createCursorKeys();
            
            //student.create(400, 0, 'student');
            //this.add.image(, 'tileblock');
            //var playerImg = this.add.image(760, 45, 'player');
            //playerImg.scaleX = 0.2;
            //playerImg.scaleY = 0.15;

            this.anims.create({
                key: 'turn',
                frames: this.anims.generateFrameNumbers('student', { start: 0, end: 5 }),
                frameRate: 10,
                repeat: -1
            });

            this.anims.create({
                key: 'none',
                frames: [ { key: 'student', frame: 4 } ],
                frameRate: 10
            });
            this.physics.add.collider(student, beesles);
            this.physics.add.collider(student, center); 

        }

        function update ()
        {
            
            if (cursors.right.isDown)
            {
                student.setVelocityX(160);
                student.anims.play('turn', true);
            }
            else if (cursors.left.isDown)
            {
                student.setVelocityX(-160);

                student.anims.play('turn', true);
            }
            else
            {
                student.setVelocityX(0);
            }
            if (cursors.up.isDown)
            {
                student.setVelocityY(-160);

                student.anims.play('turn', true);
            }
            
            
            else if (cursors.down.isDown)
            {
                student.setVelocityY(160);

                student.anims.play('turn', true);
            }
            else
            {
                student.setVelocityY(0);

                student.anims.play('none', true);
            }
        }
        </script>
</body>
</html>